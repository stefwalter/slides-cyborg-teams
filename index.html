<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
<link rel="stylesheet" href="pikestreet.css">
<title>Training machines to be Open Source Contributors</title>
<script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'node_modules/reveal.js/css/print/pdf.css' : 'node_modules/reveal.js/css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild( link );
</script>
</head>
<body>

<div class="reveal">

<div class="redhat-logo"></div>

<div class="slides">

    <section data-state="title">
        <h1>Training Machines</h1>
        <h2>to be Open Source Contributors</h2>
        <br>
        <p><strong>Stef Walter</strong><br>
        Red Hat</p>
    </section>

    <section>
        <h1>Cyborg Teams</h1>
        <aside class="notes">
            Hi my name is Stef. I'm not a Cyborg but I work on a Cyborg Team.
            This isn't hyperbole or sci-fi.
        </aside>
    </section>

    <section>
        <strong>[We] ate all the low-hanging fruit<br> of modern history ...<br></strong>
        <div style="text-align: right; padding-right: 5em;"><span>&mdash; Tyler Cowen</span></div>
    </section>

    <section data-background-color="#000"
        data-background-image="images/flickr_tt2times_2568645910_5a0704ee8e_o.jpg">
        <h1 class="stand">MACHINES!</h1>
    </section>

    <section>
        <strong>You see the computer age everywhere<br>but in the productivity statistics.<br></strong>
        <div style="text-align: right; padding-right: 5em;"><span>&mdash; Robert Solow</span></div>
    </section>

    <section>
        <h3>"But we use machines!"</h3>
    </section>

    <section data-background-color="#000"
	    data-background-image="images/549455_81_58982_VVxCIx9m5.jpg-core77.png">
        <aside class="notes">
            Jump back into the past
            Talk about the industrial revolution
            * Machines were built around the power source
            * It took a long time for a change to actually have it's effect
        </aside>
    </section>

    <section>
        <h1>Cyborg Teams</h1>
        <p class="comment">A team that is <span class="fragment">part human</span><span class="fragment">,
            part machine</span></p>
        <aside class="notes">
            This is the low hanging fruit.
        </aside>
    </section>

    <section data-state="divider">
        <h1 class="alt">The Proof</h1>
    </section>

    <section data-state="clear" data-transition="fade-in fade-out">
	<img src="images/logo.png" style="width: 800px">
        <p>a Linux session in a web browser</p>
        <aside class="notes">
        We've had a preview of that future in the Cockpit team
        </aside>
    </section>

    <section data-state="clear" data-transition="fade-in fade-out"
        data-background-repeat="no-repeat" data-background-position="center"
        data-background="#fff" data-background-image="images/cockpit-system.png">
    </section>

    <section data-state="clear" data-transition="fade-in fade-out"
        data-background-repeat="no-repeat" data-background-position="center"
        data-background="#fff" data-background-image="images/cockpit-topology.png">
    </section>

    <section>
        <section data-state="clear" data-background-video="video/spawn-process.webm">
        </section>

        <section data-state="clear" data-background-video="video/dbus-proxy.webm">
        </section>
    </section>

    <section data-background-image="avatars/layout.png">
    </section>

    <section>
        <section data-state="complex">
            <table class="reasons">
                <thead>
                    <th colspan="5" class="comment">
                        90+ APIs: File, Command, REST, DBus, Socket
                    </th>
                </thead>
                <tbody>
                    <tr>
                        <td>abrt</td>
                        <td>AppStream</td>
                        <td>apt-get</td>
                        <td>atomic</td>
                        <td>Candlepin /candlepin/</td>
                    </tr><tr>
                        <td>chpasswd</td>
                        <td>CloudForms</td>
                        <td>cryptsetup</td>
                        <td>curl</td>
                        <td>dbus-daemon</td>
                    </tr><tr>
                        <td>device-mapper</td>
                        <td>docker-storage-setup</td>
                        <td>docker</td>
                        <td>e2fsprogs</td>
                        <td>etcd</td>
                    </tr><tr>
                        <td>/etc/kdump.conf</td>
                        <td>/etc/passwd</td>
                        <td>firewalld</td>
                        <td>FreeIPA</td>
                        <td>GnuTLS</td>
                    </tr><tr>
                        <td>GSSAPI</td>
                        <td>hostnamed</td>
                        <td>ipa-client</td>
                        <td>ipa-client</td>
                        <td>iproute</td>
                    </tr><tr>
                        <td>iptables</td>
                        <td>iscsi-tools</td>
                        <td>journalctl</td>
                        <td>kdump</td>
                        <td>klist</td>
                    </tr><tr>
                        <td>krb5</td>
                        <td>Kubernetes /api/</td>
                        <td>lastlog</td>
                        <td>libvirt</td>
                        <td>loginctl</td>
                    </tr><tr>
                        <td>lvm</td>
                        <td>mdadm</td>
                        <td>NetworkManager</td>
                        <td>NetworkManager-team</td>
                        <td>oddjob</td>
                    </tr><tr>
                        <td>Openshift /oapi/</td>
                        <td>Openshift OAuth2</td>
                        <td>openssl</td>
                        <td>ostree</td>
                        <td>oVirt /api/</td>
                    </tr><tr>
                        <td>PackageKit</td>
                        <td>passwd</td>
                        <td>PCP</td>
                        <td>PolicyKit</td>
                        <td>/proc/meminfo... <!-- cpuinfo, diskstats --></td>
                    </tr><tr>
                        <td>/proc/mounts</td>
                        <td>/proc/net/dev...</td>
                        <td>procps-ng</td>
                        <td>/proc/stat</td>
                        <td>pwquality</td>
                    </tr><tr>
                        <td>qemu</td>
                        <td>realmd</td>
                        <td>rm ...</td>
                        <td>rpmostreed</td>
                        <td>rpm</td>
                    </tr><tr>
                        <td>selinux-policy-targeted</td>
                        <td>selinux-utils</td>
                        <td>setenforce</td>
                        <td>Setroubleshootd</td>
                        <td>shadow-utils</td>
                    </tr><tr>
                        <td>shutdown</td>
                        <td>sosreport</td>
                        <td>ssh-agent</td>
                        <td>sshd</td>
                        <td>ssh-keygen</td>
                    </tr><tr>
                        <td>ssh</td>
                        <td>sssd</td>
                        <td>storaged</td>
                        <td>subscription-manager</td>
                        <td>sudo</td>
                    </tr><tr>
                        <td>/sys/fs/cgroup</td>
                        <td>/sys/kernel</td>
                        <td>/sys/power</td>
                        <td>systemd</td>
                        <td>timedated</td>
                    </tr><tr>
                        <td>Tuned</td>
                        <td>udev</td>
                        <td>UDisks2</td>
                        <td>/usr/bin/kubectl</td>
                        <td>/usr/bin/timedatectl</td>
                    </tr><tr>
                        <td>/usr/bin/virt-install</td>
                        <td>/var/log/wtmp</td>
                        <td>/var/run/utmp</td>
                        <td>virsh</td>
                        <td>who/w</td>
                    </tr><tr>
                        <td>xfsprogs</td>
                        <td>yum</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section data-state="complex">
            <!-- TODO: Add logos -->
            <table class="reasons">
                <thead>
                    <th>15+ Linuxes and Products</th>
                </thead>
                <tbody>
                    <tr>
                        <td>CentOS (7.x, Atomic)
                    </tr><tr>
                        <td>Fedora (25, 26, 27, Atomic)</td>
                    </tr><tr>
                        <td>Ubuntu (stable, 16.04)</td>
                    </tr><tr>
                        <td>RHEL (7.x, 7.4, Extras, Atomic)</td>
                    </tr><tr>
                        <td>Debian (stable, testing)</td>
                    </tr><tr>
                        <td>Openshift</td>
                    </tr><tr>
                        <td>RHEV Hypervisor</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section data-state="complex">
            <table class="reasons">
                <thead>
                    <th>5+ maintained branches</th>
                </thead>
                <tbody>
                    <tr>
                        <td>master</td>
                    </tr><tr>
                        <td>rhel-7.4</td>
                    </tr><tr>
                        <td>rhel-7.3.x</td>
                    </tr><tr>
                        <td>i386</td>
                    </tr><tr>
                        <td>s390x</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section data-state="complex">
            <table class="reasons">
                <thead>
                    <th>3+ browsers</th>
                </thead>
                <tbody>
                    <tr>
                        <td>Google Chrome</td>
                    </tr><tr>
                        <td>Internet Explorer</td>
                    </tr><tr>
                        <td>Firefox</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section data-state="complex" data-transition="slide-in fade-out">
            <p class="comment">Weekly releases</p>
        </section>
    </section>

    <section data-background-color="#000" data-transition="fade-in fade-out"
	    data-background-image="images/explosion-422301_1920.jpg">
        <h1 class="stand">92 &#215; 15 &#215; 5 &#215; 3 &#215; 50</1>
        <aside class="notes">
        It interacts with XXX different APIs.
        Do the math:
            XXXX APIs
            10 Linux Operating Systems
            50 stable releases a year
        </aside>
    </section>

    <section data-transition="fade-in slide-out">
        The effort of a solely human team <strong>does not scale</strong><br>
        past a certain complexity point
    </section>

    <section>
        <h1>Cyborg Teams</h1>
        <p class="comment">Machines as team members</p>
    </section>

    <section data-background-color="#000"
	    data-background-image="images/photo-6170.jpg!d-public-domain.jpg">
        <aside class="notes">
            How do we know we have a Cyborg team?
            <p>When you look closely at the inside guts of an organism like a fish,
            all you see is goop. But when you take a step back you see it for what
            it does, how it acts, and it's an amazing creature.</p>
            <p>When you look at a bot's internal guts, all you see is shell scripts
            REST calls, and various other tools, but when you take a step back, you
            see it how it acts, a team member.</p>
        </aside>
    </section>

    <section>
        <ul class="reasons fa-ul">
            <li>
                <i class="fa-li fa fa-repeat"></i>
                <span>Bots own <strong>mundane work</strong></span>
            </li>
            <li >
                <i class="fa-li fa fa-magic"></i>
                <span>Pair programming with bots</span>
            </li>
            <li>
                <i class="fa-li fa fa-user"></i>
                <span>Humans train the bots</span>
            </li>
            <li>
                <i class="fa-li fa fa-android"></i>
                <span>Bots learn from humans</span>
            </li>
            <li>
                <i class="fa-li fa fa-ship"></i>
                <span>Bots ship Cockpit</span>
            </li>
            <li>
                <i class="fa-li fa fa-code-fork"></i>
                <span>Bots as committers</span>
            </li>
            <li>
                <i class="fa-li fa fa-meh-o"></i>
                <span>Team stops without bots
            </li>
        </ul>
        <aside class="notes">
            <p>How the machines act</p>
        </aside>
    </section>

    <section>
        <section>
            <p class="reasons">
                <i class="fa fa-repeat"></i>
                <span>Bots own <strong>mundane work</strong></span>
            </p>
        </section>

        <section>
            <img src="images/f1-issue-filed.png">
        </section>

        <section>
            <img src="images/f2-issue-wip.png">
        </section>

        <section>
<pre><code>$ make po/cockpit.pot
$ make upload-pot
$ make download-po
$ git add po/
$ git checkout -b po-refresh-xxx
$ git commit -m "po: Update from Fedora Zanata"
$ git push cockpitous po-refresh-xxx
</code></pre>
        </section>

        <section>
            <img src="images/f3-pull-request.png">
        </section>

        <section>
            <img src="images/f4-testing.png">
        </section>

        <aside class="notes">
        <!-- TODO: Fill in stats here 
        500,000 tests per month
        * Testing the code tens of thousands of times a day.
	or Explain a full flow issue -> pull request ->
	* highlight that no manual step is involved,
	* In the "open source manner" plug existing pieces together
	* Maybe highlight that any step can be taken over by a human if necessary
	* "Christmas"
        -->
        </aside>
    </section>

    <section>
        <section>
            <p class="reasons">
                <i class="fa fa-magic"></i>
                <span>Pair programming with bots</span>
            </p>
        </section>
        <section>
            <img class="border" src="images/cc-mendhak-flikr-3229053685_097ca85dfb_o.jpg">
        </section>
    </section>

    <section>
        <section>
            <p class="reasons">
                <i class="fa fa-user"></i>
                <span>Humans train the bots</span>
            </p>
        </section>
        <section>
            <img class="border" src="images/typingman.gif">
        </section>

        <section>
<pre><code>$ <strong>git shortlog --summary -- bots/ test/ | sort -nr</strong>
  1140	Stef Walter
   707	Marius Vollmer
   278	Dominik Perpeet
   239	Peter Volpe
   214	Martin Pitt
    32	Jan Scotka
    13	Lars Karlitski
    12	Subin M
    10	Marek Libra
     6	Andreas Nilsson
     5	Matej Marusak
     4	Stephen Gallagher
...</code></pre>
        </section>
    </section>

    <section>
        <section>
            <p class="reasons">
                <i class="fa fa-android"></i>
                <span>Bots learn from humans</span>
            </p>
        </section>
        <section>
            <img src="images/BenderBot_slow.gif">
        </section>
        <section>
            <img src="images/wikipedia-public-domain-Neural_network_bottleneck_achitecture.svg">
            <aside class="notes">
                * Describe how human activity in project has patterns, and machines are starting
                  to identify them and learn from them.
                * More on this toward the end of talk.
            </aside>
        </section>
    </section>

    <section>
        <section>
            <p class="reasons">
                <i class="fa fa-ship"></i>
                <span>Bots ship Cockpit</span>
            </p>
        </section>
        <section style="text-align: left;">
            <!-- TODO: Finish this slide -->
            <h2 class="comment">Human signs a tag in git</h2>
            <div class="fragment">
                <h2 class="comment">Bots scurry about</h2>
                <ul>
                    <li>Make <strong>tarballs and patches</strong></li>
                    <li>Update RPM spec files and Debian control files</li>
                    <li><strong>Release</strong> preview builds</li>
                    <li>Update and push <strong>Fedora</strong> packages</li>
                    <li>Upload packages into <strong>Ubuntu</strong></li>
                    <li>Upload packages into <strong>Debian</strong></li>
                    <li>Upload <strong>tarballs</strong></li>
                    <li>Container rebuilds on <strong>Docker Hub</strong></li>
                    <li>Online documentation update</li>
                </ul>
            </div>
            <aside class="notes">
                * Sign a tag, bots do what needs to be done
                * Would take two days to do otherwise
                * Talk about how this is less than 2 hours
                * List all the places again
            </aside>
        </section>
    </section>

    <section>
        <section>
            <p class="reasons">
                <i class="fa fa-code-fork"></i>
                <span>Bots as committers</span>
            </p>
        </section>
        <section>
            <img class="border" src="images/github-commit-graph.png">
        </section>

        <section>
<pre><code>$ <strong>$ git shortlog -ns | head -n10 | cut -c8-30 | nl</strong>
     1	Stef Walter
     2	Marius Vollmer
     3	Peter Volpe
     4	Cockpituous
     5	Dominik Perpeet
     6	Martin Pitt
     7	Andreas Nilsson
     8	Lars Karlitski
     9	Philip Donlon
    10	Jan Scotka</code></pre>
        </section>
    </section>

    <section>
        <p class="reasons">
            <i class="fa fa-meh-o"></i>
            <span>Team stops without bots
        </p>
    </section>

    <section data-state="divider">
        <h1 class="alt">Rules</h1>
    </section>

    <section style="text-align: left;">
        <!-- TODO Bring in the open source angle -->
        <h1 class="comment">Laws of Cyborg Teams</h1>
        <ol class="listing">
            <li class="fragment">Teaching a machine must be<br>as easy as teaching a human</li>
            <li class="fragment">Machines must produce feedback<br>into the team's workflow</li>
            <li class="fragment">A human should be able to<br>impersonate a machine, and<br>
                a machine impersonate a human</li>
        </ol>
    </section>

    <section>
        <h2><strong>Tests: The Soul of a Robot</strong></h2>
        <p class="comment">Teaching machines right and wrong, good and evil</p>
    </section>

    <section data-state="divider">
        <h1 class="alt">Techniques</h1>
    </section>

    <section>
        <ul class="reasons fa-ul">
            <li>
                <i class="fa-li fa fa-repeat"></i>
                <span>Organic and distributed bots</strong></span>
            </li>
            <li>
                <i class="fa-li fa fa-check-circle-o"></i>
                <span>Self validating bots</span>
            </li>
            <li>
                <i class="fa-li fa fa-grav"></i>
                <span>Self aware bots</span>
            </li>
            <li>
                <i class="fa-li fa fa-archive"></i>
                <span>Containerize your bots, yo!</span>
            </li>
            <li>
                <i class="fa-li fa fa-chain-broken"></i>
                <span>Don't assume bots can't</span>
            </li>
            <li>
                <i class="fa-li fa fa-recycle"></i>
                <span>Don't rework process (yet)</span>
            </li>
        </ul>
    </section>


    <section>
        <section>
            <p class="reasons"><i class="fa fa-repeat"></i><span>Organic and distributed bots</strong></span></p>
        </section>

        <section>
            <img src="images/01-initial.png">
        </section>

        <section>
            <img src="images/02-tasks.png">
        </section>

        <section>
            <img src="images/03-logs.png">
        </section>

        <section>
            <img src="images/04-status.png">
        </section>

        <section>
            <img src="images/06-images.png">
        </section>
    </section>

    <section>
        <section>
            <p class="reasons">
                <i class="fa fa-check-circle-o"></i>
                <span>Self validating bots</span>
            </p>
        </section>
    </section>

    <section>
        <section>
            <!-- TODO: Collision detection and avoidance -->
            <p class="reasons">
                <i class="fa fa-grav"></i>
                <span>Self aware bots</span>
            </p>
        </section>

        <section>
    <pre><code>    kvm = os.access("/dev/kvm", os.R_OK | os.W_OK)

        try:
            urllib.urlopen(REDHAT_PING).read()
            redhat = os.path.exists(os.path.expanduser(REDHAT_CREDS))
        except IOError:
            redhat = False
    </code></pre>
            <aside class="notes">
                * Not quite true that it doesn't matter where the yrun
            </aside>
        </section>
    </section>

    <section>
        <section>
            <p class="reasons">
                <i class="fa fa-archive"></i>
                <span>Containerize your bots, yo!</span>
            </p>
        </section>

	<section data-background="images/yo-dawg.png" data-background-position="bottom right"
		data-background-size='10em'>
            <!-- TODO: Lay this slide out -->
            Testing <strong>containers</strong><br>
            in <strong>Virtual Machines</strong><br>
            in <strong>container</strong> bots<br>
            running on <strong>virtual machines</strong><br>
            <strong class="fragment">on turtles</strong><br>
        </section>
    </section>

    <section>
        <p class="reasons">
            <i class="fa fa-chain-broken"></i>
            <span>Don't assume bots can't</span>
        </p>
        <aside class="notes">
            It is comparatively easy to make computers exhibit adult level performance on intelligence tests or playing checkers, and difficult or impossible to give them the skills of a one-year-old when it comes to perception and mobility.
        </aside>
    </section>

    <section>
        <p class="reasons">
            <i class="fa fa-recycle"></i>
            <span>Don't rework process (yet)</span>
        </p>
        <aside class="notes">
        Technique: Don't rework your broken process, automate it
        </aside>
    </section>

    <section data-state="divider">
        <h1 class="alt">Test flakes</h1>
        <p class="comment">Food not poison</p>
    </section>

    <section>
        <section>
            <h2>Flakes are just mutations</h2>
        </section>

        <section>
            <img src="images/cc-wikipedia-chire-SLINK-Gaussian-data.png" width="800px">
        </section>

        <section>
            <img src="images/flake-probability.png" width="1200px">
        </section>
    </section>

    <section>
        <h1>Cyborg Teams</h1>
        <p class="comment">Happy humans, tired machines</p>
    </section>

    <section data-state="title">
        <h1 class="alt">Questions?</h1>
            <br><br>
            <h3 class="comment">cockpit-project.org</h3>
            <h3 class="comment">#cockpit on FreeNode</h3>
        <p><tt></tt></p>
        <p class="credits">
        <span class="comment">Credits:</span><br>
        Machines: tt2times on Flickr<br>
        Pear Programming: mendhak on Flickr<br>
        Clusters: Chire on Wikipedia<br>
        </p>
    </section>

</div>
</div>

<script src="node_modules/reveal.js/lib/js/head.min.js"></script>
<script src="node_modules/reveal.js/js/reveal.js"></script>
<script src="slides.js"></script>

</body>
</html>
